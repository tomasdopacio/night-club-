<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Night Club</title>
</head>
<body data-bs-theme="dark">
    <header>
        <div class="menu">
            <img src="img/logo.jpg" alt="logo">
        </div>
        <nav>
            <Button><a href="#1">COMIDAS</a></Button>
            <Button><a href="#2">BEBIDAS</a></Button>
            <Button><a href="#3">TRAGOS</a></Button>
            <Button><a href="#4">COMBOS</a></Button>
            <button><a href="/crear_producto">CREAR PRODUCTO</a></button>
        </nav>
    </header>
    
    <main>
        <section class="comida">
            <a name="1"></a>
            <h1>COMIDAS</h1>
            <article class="producto">
            </article>
        </section>
        <section class="bebidas" name="2">
            <a name="2"></a>
            <h1>BEBIDAS</h1>
            <article class="producto">
            </article>
        </section>
        <section>
            <a name="3"></a>
            <h1>TRAGOS</h1>
            <article class="producto">
            </article>
        </section>
        <section class="combos">
            <a name="4"><h1>COMBOS</h1></a>
            <article class="producto" id="">
            </article>
        </section>
    </main>
    <script>
        function response_received(response) {
            return response.json()
        }
        
        function agregar_productos(productos,seccion){
            if (!productos[0]) return "No hay productos para agregar";
            
            for (let index = 0; index < productos.length; index++) {
                const articulo = document.createElement("article");
                articulo.setAttribute("class","producto");
                articulo.setAttribute("id",productos[index]["id"]);

                const contenido_producto = createElement("div");
                contenido_producto.setAttribute("class","contenido-producto");

                const nombre = createElement("h2");
                nombre.setAttribute("class","nombre-producto");
                nombre.append(productos[index]["nombre"]);

                const descripcion = createElement("p");
                descripcion.setAttribute("class","descripcion-producto");
                descripcion.append(productos[index]["descripcion"]);

                const precio_producto = createElement("div");
                precio_producto.setAttribute("class","descripcion-producto");

                const precio = createElement("span");
                precio.setAttribute("class","precio");
                precio.append(productos[index]["precio"]);

                precio_producto.append(precio)

                const boton_editar = createElement("button");
                boton_editar.setAttribute("class","boton-editar")

                const boton_eliminar = createElement("button");
                boton_eliminar.setAttribute("class","boton-eliminar");

                contenido_producto.append(nombre);
                contenido_producto.append(descripcion);
                contenido_producto.append(precio_producto);
                contenido_producto.append(boton_editar);
                contenido_producto.append(boton_eliminar);

                const imagen = createElement("img");
                imagen.setAttribute("src",productos[index]["imagen"]);
                imagen.setAttribute("class","imagen-producto");
                imagen.setAttribute("alt",precio_producto[index]["nombre"]);

                seccion.append(contenido_producto);
                seccion.append(imagen);
            }
            return "Se agregaron productos";
        }

        function parsear_datos(contenido) {
            const seccion_comida = document.getElementsByClassName("comida");
            const seccion_bebida = document.getElementsByClassName("bebida");
            const seccion_tragos = document.getElementsByClassName("tragos");
            const seccion_combos = document.getElementsByClassName("combos");
            console.log(seccion_comida);
            
            console.log(agregar_productos(contenido["comidas"],seccion_comida));
            console.log(agregar_productos(contenido["bebidas"],seccion_bebida));
            console.log(agregar_productos(contenido["tragos"],seccion_tragos));
            console.log(agregar_productos(contenido["combos"],seccion_combos));
        }

        function request_error(error) {
            console.log("ERROR")
            console.log(error)
        }

        fetch("http://localhost:5000/")
            .then(response_received)
            .then(parsear_datos)
            .catch(request_error)
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>